{"ast":null,"code":"import _objectSpread from \"/Users/thanhthanhbui/Desktop/dpl/week7/day1/blog-refactor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/thanhthanhbui/Desktop/dpl/week7/day1/blog-refactor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport axios from 'axios';\nvar BLOGS = 'BLOGS';\nvar ADD_BLOG = 'ADD_BLOG';\nvar UPDATE_BLOG = 'UPDATE_BLOG';\nvar DELETE_BLOG = 'DELETE_BLOG';\nexport var getBlogs = function getBlogs(setLoaded) {\n  return function (dispatch) {\n    axios.get('/api/blogs').then(function (res) {\n      return dispatch({\n        type: BLOGS,\n        blogs: res.data\n      });\n    }).then(setLoaded);\n  };\n};\nexport var addBlog = function addBlog(blog) {\n  return function (dispatch) {\n    axios.post('/api/blogs', {\n      blog: blog\n    }).then(function (res) {\n      return dispatch({\n        type: ADD_BLOG,\n        blog: res.data\n      });\n    });\n  };\n};\nexport var updateBlog = function updateBlog(blog) {\n  return function (dispatch) {\n    axios.put(\"/api/blogs/\".concat(blog.id), {\n      blog: blog\n    }).then(function (res) {\n      return dispatch({\n        type: UPDATE_BLOG,\n        blog: res.data\n      });\n    });\n  };\n};\n\nvar blogs = function blogs() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'BLOGS':\n      return action.blogs;\n\n    case 'ADD_BLOG':\n      return [action.blog].concat(_toConsumableArray(state));\n\n    case 'DELETE_BLOG':\n      return state.filter(function (blog) {\n        return blog.id !== action.id;\n      });\n\n    case 'EDIT_BLOG':\n      return state.map(function (blog) {\n        return blog.id === action.id ? _objectSpread({}, blog, {\n          editing: !blog.editing\n        }) : blog;\n      });\n\n    case 'UPDATE_BLOG':\n      return state.map(function (blog) {\n        if (blog.id === action.id) {\n          return _objectSpread({}, blog, {\n            title: action.blog.newTitle,\n            body: action.blog.newBody,\n            editing: !blog.editing\n          });\n        } else return blog;\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default blogs;","map":{"version":3,"sources":["/Users/thanhthanhbui/Desktop/dpl/week7/day1/blog-refactor/client/src/reducers/blogs.js"],"names":["axios","BLOGS","ADD_BLOG","UPDATE_BLOG","DELETE_BLOG","getBlogs","setLoaded","dispatch","get","then","res","type","blogs","data","addBlog","blog","post","updateBlog","put","id","state","action","filter","map","editing","title","newTitle","body","newBody"],"mappings":"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","sourcesContent":["import axios from 'axios'\n\nconst BLOGS = 'BLOGS'\nconst ADD_BLOG = 'ADD_BLOG'\nconst UPDATE_BLOG = 'UPDATE_BLOG'\nconst DELETE_BLOG = 'DELETE_BLOG'\n\nexport const getBlogs = (setLoaded) => {\n  return (dispatch) => {\n    axios.get('/api/blogs')\n    .then( res => dispatch({ type: BLOGS, blogs: res.data }))\n    .then( setLoaded )\n  }\n}\n\nexport const addBlog = (blog) => {\n  return (dispatch) => {\n    axios.post('/api/blogs', { blog })\n    .then( res => dispatch({ type: ADD_BLOG, blog: res.data }))\n  }\n}\n\nexport const updateBlog = (blog) => {\n  return (dispatch) => {\n    axios.put(`/api/blogs/${blog.id}`, { blog })\n    .then( res => dispatch({ type: UPDATE_BLOG, blog: res.data }))\n  }\n}\n\nconst blogs = ( state = [], action ) => {\n  switch(action.type) {\n    case 'BLOGS':\n      return action.blogs\n    case 'ADD_BLOG':\n      return [action.blog, ...state]\n    case 'DELETE_BLOG':\n      return state.filter((blog) => blog.id !== action.id)\n    case 'EDIT_BLOG':\n      return state.map((blog) => blog.id === action.id ? {...blog, editing: !blog.editing} : blog)\n    case 'UPDATE_BLOG':\n      return state.map((blog) => {\n        if (blog.id === action.id) {\n          return {\n            ...blog,\n            title: action.blog.newTitle,\n            body: action.blog.newBody,\n            editing: !blog.editing\n          }\n        } else\n            return blog\n      })\n    default:\n      return state\n  }\n}\n\nexport default blogs"]},"metadata":{},"sourceType":"module"}